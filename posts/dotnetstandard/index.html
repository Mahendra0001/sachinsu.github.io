<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=author content><meta name=description content="Background One of the key project(s) at my current organization is developed on .NET 4.6.1. It is developed as Modular Monolith. As part of it&amp;rsquo;s functionality, it supports different channels like Mobiles, Terminals and Web. For the Web channel, there was need to develop a Web application with,
 High availability Lightweight, High throughput (Need to support few thousand(s) active users)  Accordingly, we have been exploring developing this Web Application in ."><meta name=keywords content="blog,developer,personal,golang,dotnetcore,databases,architecture,c#,.net core,Vuejs,Quasar,Oracle,python"><meta name=robots content="noodp"><meta name=theme-color content><link rel=canonical href=https://sachinsu.github.io/posts/dotnetstandard/><title>Using .NET standard Assembly in .NET core and .NET Framework :: Sachin Sunkle</title><link href=https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.1/css/flag-icon.min.css rel=stylesheet type=text/css><link rel=stylesheet href=https://sachinsu.github.io/main.dede02da9537a98158079c023e83573e18127834838ef08172acce888341a797.css><link rel=apple-touch-icon sizes=180x180 href=https://sachinsu.github.io/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://sachinsu.github.io/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://sachinsu.github.io/favicon-16x16.png><link rel=manifest href=https://sachinsu.github.io/site.webmanifest><link rel=mask-icon href=https://sachinsu.github.io/safari-pinned-tab.svg color=#252627><link rel="shortcut icon" href=https://sachinsu.github.io/favicon.ico><meta name=msapplication-TileColor content="#252627"><meta name=theme-color content="#252627"><meta itemprop=name content="Using .NET standard Assembly in .NET core and .NET Framework"><meta itemprop=description content="Background One of the key project(s) at my current organization is developed on .NET 4.6.1. It is developed as Modular Monolith. As part of it&rsquo;s functionality, it supports different channels like Mobiles, Terminals and Web. For the Web channel, there was need to develop a Web application with,
 High availability Lightweight, High throughput (Need to support few thousand(s) active users)  Accordingly, we have been exploring developing this Web Application in ."><meta itemprop=datePublished content="2020-02-07T10:25:04+05:30"><meta itemprop=dateModified content="2020-02-07T10:25:04+05:30"><meta itemprop=wordCount content="487"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Using .NET standard Assembly in .NET core and .NET Framework"><meta name=twitter:description content="Background One of the key project(s) at my current organization is developed on .NET 4.6.1. It is developed as Modular Monolith. As part of it&rsquo;s functionality, it supports different channels like Mobiles, Terminals and Web. For the Web channel, there was need to develop a Web application with,
 High availability Lightweight, High throughput (Need to support few thousand(s) active users)  Accordingly, we have been exploring developing this Web Application in ."><meta property="og:title" content="Using .NET standard Assembly in .NET core and .NET Framework"><meta property="og:description" content="Background One of the key project(s) at my current organization is developed on .NET 4.6.1. It is developed as Modular Monolith. As part of it&rsquo;s functionality, it supports different channels like Mobiles, Terminals and Web. For the Web channel, there was need to develop a Web application with,
 High availability Lightweight, High throughput (Need to support few thousand(s) active users)  Accordingly, we have been exploring developing this Web Application in ."><meta property="og:type" content="article"><meta property="og:url" content="https://sachinsu.github.io/posts/dotnetstandard/"><meta property="article:published_time" content="2020-02-07T10:25:04+05:30"><meta property="article:modified_time" content="2020-02-07T10:25:04+05:30"><meta property="article:published_time" content="2020-02-07 10:25:04 +0530 IST"></head><body><div class=container><header class=header><span class=header__inner><a href=https://sachinsu.github.io/ style=text-decoration:none><div class=logo><span class=logo__mark>></span>
<span class=logo__text>$ cd /home/</span>
<span class=logo__cursor></span></div></a><span class=header__right><nav class=menu><ul class=menu__inner><li><a href=https://sachinsu.github.io/about/>About</a></li><li><a href=https://sachinsu.github.io/posts/>Blog</a></li><li><a href=https://sachinsu.github.io/projects/>Projects</a></li><li><a href=https://gist.github.com/sachinsu>Gists</a></li><li><a href=https://sachinsu.github.io/links/home>Useful Links</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class="theme-toggle unselectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41C32.4934 41 41 32.4934 41 22 41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><main class=post><div class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>3 minutes</p></div><article><h1 class=post-title><a href=https://sachinsu.github.io/posts/dotnetstandard/>Using .NET standard Assembly in .NET core and .NET Framework</a></h1><div class=post-content><h2 id=background>Background</h2><p>One of the key project(s) at my current organization is developed on .NET 4.6.1. It is developed as <a href="https://www.youtube.com/watch?v=5OjqD-ow8GE">Modular Monolith</a>. As part of it&rsquo;s functionality, it supports different channels like Mobiles, Terminals and Web. For the <em>Web</em> channel, there was need to develop a Web application with,</p><ul><li>High availability</li><li>Lightweight, High throughput (Need to support few thousand(s) active users)</li></ul><p>Accordingly, we have been exploring developing this Web Application in .NET core 3.1. However, it also means that we will have to use class libraries, targeted at .NET framework 4.6.1, in .NET core and vice-versa. How can this be done?</p><p><strong>.NET Standard to the rescue !!</strong></p><p><a href=https://docs.microsoft.com/en-us/dotnet/standard/net-standard>.Net Standard</a> is a standard that enabled development of portable libraries usable across .NET versions.</p><p>Below is approach adopted to create usable libraries across .NET framework & .NET Core.</p><ul><li><p>.NET & IDE versions used are,</p><ul><li>.Net Framework 4.6.1</li><li>.Net core 3.1</li><li>Visual Studio 2015 - for .NET Framework 4.6.1 development</li><li>Visual Studio Code - For .NET core development</li></ul></li><li><p>Step 1 -</p><ul><li>Create a library that targets .NET Standard.<ul><li><p>Refer to Table on <a href=https://docs.microsoft.com/en-us/dotnet/standard/net-standard#net-implementation-support>Implementation Support</a> to decide on version that can be targetted at. In my case, it was 2.0 (Remember that higher the version, more APIs will be available to use). Do check <a href=https://docs.microsoft.com/en-us/dotnet/api/>.NET API browser</a>, which lists API available with each version.</p></li><li><p>Using .NET core, use below command,
<code>dotnet new classlib &lt;name></code></p><p>Note that, by default csproj file generated targets .NET Standard, but do confirm by checking in <code>&lt;name>.csproj</code> file, It should have entry like,</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>&lt;PropertyGroup&gt;
    &lt;TargetFramework&gt;netstandard2.0&lt;/TargetFramework&gt;
&lt;/PropertyGroup&gt;
</code></pre></div><p>Change the version of .NET Standard if required.</p></li><li><p>Add necessary code to the library and build it using,
<code>dotnet build</code></p></li><li><p>Create a Nuget Package using,
<code>dotnet pack</code>
This will generate <code>&lt;name>1.0.0.nupkg</code> package in bin\debug folder (assuming that you are using Debug mode)</p></li></ul></li></ul></li><li><p>Step 2 -</p><ul><li><p>Lets consume this library from console Application, using .NET Framework 4.6.1, in Visual Studio 2015.</p><ul><li><p>Create New Console Application and ensure that it is targeted at .NET Framework 4.6.1 or Higher.</p></li><li><p>Before consuming .NET standard library, few steps are needed since VS 2015 only has legacy support for consuming .NET core artifacts also it does not have latest version of Nuget, so lets do below,</p><ul><li>Install NuGet 3.6.0 or higher for VS 2015 from <a href=https://www.nuget.org/downloads>NuGet&rsquo;s download site</a></li><li>Install the &ldquo;.NET Standard Support for Visual Studio 2015&rdquo; from <a href=https://www.microsoft.com/net/download/core>here</a></li><li>Open the csproj file in Text Editor and add <code>&lt;ImplicitlyExpandDesignTimeFacades></code> tag as shown in below example,</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;
&lt;Project ToolsVersion=&#34;12.0&#34; DefaultTargets=&#34;Build&#34; xmlns=&#34;http://schemas.microsoft.com/developer/msbuild/2003&#34;&gt;
&lt;PropertyGroup&gt;
    &lt;Configuration Condition=&#34; &#39;$(Configuration)&#39; == &#39;&#39; &#34;&gt;Debug&lt;/Configuration&gt;
    &lt;Platform Condition=&#34; &#39;$(Platform)&#39; == &#39;&#39; &#34;&gt;AnyCPU&lt;/Platform&gt;
    &lt;ProjectGuid&gt;{75678902-8224-4222-BB33-756784B2FA29}&lt;/ProjectGuid&gt;
    &lt;OutputType&gt;Library&lt;/OutputType&gt;
    &lt;RootNamespace&gt;FooBar&lt;/RootNamespace&gt;
    &lt;AssemblyName&gt;FooBar&lt;/AssemblyName&gt;
    &lt;TargetFrameworkVersion&gt;v4.6.1&lt;/TargetFrameworkVersion&gt;
    ...
    &lt;ImplicitlyExpandDesignTimeFacades&gt;false&lt;/ImplicitlyExpandDesignTimeFacades&gt;
&lt;/PropertyGroup&gt;
</code></pre></div><p>Post update to file, VS 2015 will prompt to reload the project.</p><p>Now we are set to consume .NET standard library, authored in .NET Core, in this project.</p></li></ul></li></ul></li><li><p>Step 3 -</p><ul><li>Within VS 2015, Goto Nuget Console and install the package created earlier. This <a href=https://docs.microsoft.com/en-us/nuget/consume-packages/install-use-packages-visual-studio>link</a> has steps to consume local nuget package(s).</li></ul></li></ul><p>Happy Coding !!</p><hr><script src=https://utteranc.es/client.js repo=sachinsu/sachinsu.github.io issue-term=title label=blogcomment theme=github-light crossorigin=anonymous async></script></div></article><hr><div class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>487 Words</p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>2020-02-07 10:25 +0530</p></div><div class=pagination><div class=pagination__title><span class=pagination__title-h></span><hr></div><div class=pagination__buttons><span class="button previous"><a href=https://sachinsu.github.io/posts/channelsforproducerconsumer/><span class=button__icon>←</span>
<span class=button__text>Using Channels for High performance Producer consumer implementation</span></a></span></div></div></main></div><footer class=footer><div class=footer__inner><div class=footer__content><span>&copy; 2020</span>
<span><a href=https://sachinsu.github.io/posts/index.xml target=_blank title=rss><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></span></div></div><div class=footer__inner><div class=footer__content><span>Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>Made with &#10084; by <a href=https://github.com/rhazdon>Djordje Atlialp</a></span></div></div></footer></div><script type=text/javascript src=https://sachinsu.github.io/bundle.min.dc716e9092c9820b77f96da294d0120aeeb189b5bcea9752309ebea27fd53bbe6b13cffb2aca8ecf32525647ceb7001f76091de4199ac5a3caa432c070247f5b.js integrity="sha512-3HFukJLJggt3+W2ilNASCu6xibW86pdSMJ6+on/VO75rE8/7KsqOzzJSVkfOtwAfdgkd5BmaxaPKpDLAcCR/Ww=="></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-169012216-1','auto');ga('send','pageview');}</script></body></html>